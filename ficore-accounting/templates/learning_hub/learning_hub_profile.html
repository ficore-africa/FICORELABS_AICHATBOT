{% extends 'base.html' %}
{% block extra_head %}
{% endblock %}
{% block content %}
<div class="learning-hub-wrapper">
    <aside class="sidebar">
        <button class="sidebar-toggle" aria-label="{{ t('toggle_sidebar', default='Toggle sidebar', lang=lang) | e }}">â˜°</button>
        <h2>{{ t('learning_hub_nav', default='Navigation', lang=lang) | e }}</h2>
        <ul>
            <li><a href="{{ url_for('learning_hub.main') | e }}">{{ t('learning_hub_title', default='Learning Hub', lang=lang) | e }}</a></li>
            <li><a href="{{ url_for('learning_hub.personal') | e }}">{{ t('learning_hub_personal_title', default='Personal Finance Learning', lang=lang) | e }}</a></li>
            <li><a href="{{ url_for('learning_hub.business') | e }}">{{ t('learning_hub_business_title', default='Business Learning', lang=lang) | e }}</a></li>
            <li><a href="{{ url_for('learning_hub.agents') | e }}">{{ t('learning_hub_agents_title', default='Agent Learning', lang=lang) | e }}</a></li>
            <li><a href="{{ url_for('learning_hub.compliance') | e }}">{{ t('learning_hub_compliance_title', default='Compliance Learning', lang=lang) | e }}</a></li>
            <li><a href="{{ url_for('learning_hub.tool_tutorials') | e }}">{{ t('learning_hub_tool_tutorials_title', default='Tool Tutorials', lang=lang) | e }}</a></li>
            <li><a href="{{ url_for('learning_hub.profile') | e }}">{{ t('learning_hub_profile_title', default='Profile', lang=lang) | e }}</a></li>
            {% if current_user.is_authenticated and is_admin() %}
                <li><a href="#upload">{{ t('learning_hub_upload_content', default='Upload Content', lang=lang) | e }}</a></li>
            {% endif %}
        </ul>
        <div class="role-filter">
            <label for="role-filter">{{ t('learning_hub_role_filter', default='Filter by Role', lang=lang) | e }}</label>
            <select id="role-filter" name="role">
                <option value="all" {% if role_filter == 'all' %}selected{% endif %}>{{ t('learning_hub_all_roles', default='All Roles', lang=lang) | e }}</option>
                <option value="trader" {% if role_filter == 'trader' %}selected{% endif %}>{{ t('learning_hub_trader', default='Trader', lang=lang) | e }}</option>
                <option value="personal" {% if role_filter == 'personal' %}selected{% endif %}>{{ t('learning_hub_personal', default='personal', lang=lang) | e }}</option>
                <option value="agent" {% if role_filter == 'agent' %}selected{% endif %}>{{ t('learning_hub_agent', default='Agent', lang=lang) | e }}</option>
            </select>
        </div>
    </aside>

    <main class="container">
        <div class="section-title">{{ t('profile_settings', default='Profile Settings', lang=lang) | e }}</div>
        <form method="POST" action="{{ url_for('learning_hub.profile') | e }}">
            {{ profile_form.hidden_tag() }}
            <label for="first_name">{{ t('first_name', default='First Name', lang=lang) | e }}</label>
            {{ profile_form.first_name }}
            <label for="email">{{ t('email', default='Email', lang=lang) | e }}</label>
            {{ profile_form.email }}
            <label for="send_email">{{ t('send_email', default='Receive Email Notifications', lang=lang) | e }}</label>
            {{ profile_form.send_email }}
            <button type="submit">{{ t('save_profile', default='Save Profile', lang=lang) | e }}</button>
        </form>
        <a href="{{ url_for('learning_hub.unsubscribe', email=profile_data.email) | e }}" class="btn">{{ t('unsubscribe', default='Unsubscribe from Emails', lang=lang) | e }}</a>
    </main>
</div>
{% endblock %}
